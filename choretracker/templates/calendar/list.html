{% extends "base.html" %}

{% block title %}{{ entry_type.value }}s - Chore Tracker{% endblock %}

{% block content %}
<h1>{{ entry_type.value }}s{% if user_has(current_user, WRITE_PERMS[entry_type]) %}<a href="{{ url_for('new_calendar_entry', entry_type=entry_type.value) }}" class="icon-button"><img src="{{ url_for('static', path='plus.svg') }}" alt="Add" class="icon"></a>{% endif %}</h1>

<h2>Active</h2>
<ul>
    {% for entry in active_entries %}
    <li>
        <a href="{{ url_for('view_calendar_entry', entry_id=entry.id) }}">{{ entry.title }}</a>
        {% if (current_user in entry.managers or user_has(current_user, 'admin')) and can_delete[entry.id] %}
        <form method="post" action="{{ url_for('delete_calendar_entry', entry_id=entry.id) }}" style="display:inline" onsubmit="return confirm('Are you sure you want to delete this entry?');">
            <button type="submit" class="icon-button"><img src="{{ url_for('static', path='trash.svg') }}" alt="Delete" class="icon"></button>
        </form>
        {% endif %}
    </li>
    {% else %}
    <li>No active entries found.</li>
    {% endfor %}
</ul>

<h2>Past</h2>
<ul>
    {% for entry in past_entries %}
    <li>
        <a href="{{ url_for('view_calendar_entry', entry_id=entry.id) }}">{{ entry.title }}</a>
        {% if (current_user in entry.managers or user_has(current_user, 'admin')) and can_delete[entry.id] %}
        <form method="post" action="{{ url_for('delete_calendar_entry', entry_id=entry.id) }}" style="display:inline" onsubmit="return confirm('Are you sure you want to delete this entry?');">
            <button type="submit" class="icon-button"><img src="{{ url_for('static', path='trash.svg') }}" alt="Delete" class="icon"></button>
        </form>
        {% endif %}
    </li>
    {% else %}
    <li>No past entries found.</li>
    {% endfor %}
</ul>
{% endblock %}

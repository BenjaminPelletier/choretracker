{% extends "base.html" %}

{% block title %}Users - Chore Tracker{% endblock %}

{% block content %}
<h1>Users <a href="{{ url_for('new_user') }}"><img src="{{ url_for('static', path='plus.svg') }}" alt="New user" class="icon"></a></h1>
<ul>
{% for u in users %}
    <li>
        <img src="{{ url_for('profile_picture', username=u.username) }}" alt="{{ u.username }}" class="profile-icon">
        {{ u.username }}{% if 'admin' in u.permissions %} (admin){% endif %}
        <a href="{{ url_for('edit_user', username=u.username) }}"><img src="{{ url_for('static', path='pen.svg') }}" alt="Edit" class="icon"></a>
        {% if u.username not in undeletable %}
        <form method="post" action="{{ url_for('delete_user', username=u.username) }}" style="display:inline">
            <input type="hidden" name="csrf_token" value="{{ request.session['csrf_token'] }}">
            <button type="submit" class="icon-button"><img src="{{ url_for('static', path='trash.svg') }}" alt="Delete" class="icon"></button>
        </form>
        {% endif %}
    </li>
{% endfor %}
</ul>
{% endblock %}
